<!DOCTYPE html>
<html lang="en">
 
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content=
        "width=device-width,
        initial-scale=1.0" />
 
    <title>Siren Sounds</title>
    <link rel="stylesheet" href="style.css"> <!--Link to style of clock for FRONTEND-->
</head>
 
<body>
    
    <!--<div id="date">mon day,year</div>-->
    <!--<div id="clock">8:10:45</div>-->

 <div class = "wrapper">
  <div id="date">mon day,year</div>
  <div id="clock">8:10:45</div>
  <input onchange = "setAlarmTime(this.value)" name = "alarmTime" type="datetime-local">
 <div class = "content">
    <div class = "column">
     <select>
       <option value = "Hour" selected hidden>Hour</option>
       <option value = "01">01</option>
       <option value = "02">02</option>
       <option value = "03">03</option>
     </select>
    </div>
   <div class = "column">
     <select>
       <option value = "Minute" selected hidden>Minute</option>
       <option value = "01">01</option>
       <option value = "02">02</option>
       <option value = "03">03</option>
     </select>
    </div>
   <div class = "column">
     <select>
       <option value = "AM/PM" selected hidden>AM/PM</option>
       <option value = "AM">AM</option>
      <option value = "PM">PM</option>
     </select>
    </div>
 </div>
 <div class ="controls">
     <button onclick="setAlarm()" class = "button set-alarm">Set Alarm</button>
     <button onclick = "clearAlarm()" class = "button clear-alarm">Clear Alarm</button>
 </div>
 </div>
   
    
 
    <script>
        setInterval(showTime, 1000);
        function showTime() {
            let time = new Date();
            let hours = time.getHours();
            let mins = time.getMinutes();
            let secs = time.getSeconds();
            am_pm = "AM";
            
            //Convert clock to 12 hr format
            if (hours > 12) {
                hours -= 12;
                am_pm = "PM";
            }
            if (hours == 0) {
                hours = 12;
                am_pm = "AM";
            }
            
            //update time and seconds if less than 10
            hours = hours< 10 ? "0" + hours : hours;
            mins = mins < 10 ? "0" + mins : mins;
            secs = secs < 10 ? "0" + secs : secs;
         
            //updates current date
            var currentDate  = new Date(),
            currentDay   = currentDate.getDate() < 10 
                 ? '0' + currentDate.getDate() 
                 : currentDate.getDate(),
            currentMonth = currentDate.getMonth() < 9 
                 ? '0' + (currentDate.getMonth() + 1) 
                 : (currentDate.getMonth() + 1);
         
            //date formatting
            let dow = ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"];
            let months = ["January", "February", "March", "April", "May", "June", "July","August", "September", "October", "November", "December"];
             
            //displays date
            document.getElementById("date").innerHTML = months[currentMonth - 1] + " " + currentDay + "," + currentDate.getFullYear();
          
            //display current time and date
            let currentTime = hours + ":"
                + mins + ":" + secs + am_pm;
            document.getElementById("clock")
                .innerHTML = currentTime;
        }
 
        showTime();
     let alarmTime = null;
     let alarmTimeout = null;
     
     
     function setAlarmTime(value){
        alarmTime = value;  
        console.log(alarmTime);
     }
     
     function setAlarm(){
       if(alarmTime){
           const current = newDate();
           const timetoAlarm = newDate(alarmTime);
           
           if (timeToAlarm > current) {
               const timeout = timeToAlarm.getTime() - current.getTime();
               alarmTimeout = setTimeout(() => audio.play, timeout);
               alert('Alarm set');
           }
       }
     }
     
     function clearAlarm() {
       audio.pause();
       if (alarmTimeout){
           clearTimeout(alarmTimeout);
           alert('Alarm cleared');
       }
    }
     
    </script>
</body>
 
</html>
